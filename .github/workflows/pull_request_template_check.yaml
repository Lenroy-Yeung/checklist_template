name: Check Pull Request Template

on:
  pull_request:
    types: [opened, edited, reopened]

jobs:
  check_template:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Check if PR template has all checkmarks
        run: |
          PR_BODY=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
                    -H "Accept: application/vnd.github.v3+json" \
                    ${{ github.api_url }}/repos/${{ github.repository }}/pulls/${{ github.event.number }} \
                    | jq -r '.body')
          
          if [[ $PR_BODY =~ \[ \] ]]; then
            echo "Some checkmarks are missing in the pull request window."
            exit 1
          else
            echo "All checkmarks present in the pull request window."
            exit 0
          fi
