name: Verify Checklist

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  verify_checklist:
    name: Verify Checklist
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Verify Checklist
        run: |
          # Get the PR number
          PR_NUMBER=$(jq --raw-output .pull_request.number "$GITHUB_EVENT_PATH")

          # Get the PR body
          PR_BODY=$(curl -sSL -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" -H "Accept: application/vnd.github.v3+json" "https://api.github.com/repos/${GITHUB_REPOSITORY}/pulls/${PR_NUMBER}" | jq --raw-output .body)

          # Check if all checkboxes are checked
          if [[ $PR_BODY != *"[ ]"* ]]; then
            echo "All checkboxes are checked."
          else
            echo "Not all checkboxes are checked."
            exit 1
          fi
